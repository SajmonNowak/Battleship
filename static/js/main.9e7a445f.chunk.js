(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{42:function(n,t,e){"use strict";e.r(t);var i,r,a,o,c,s,u,h,l,p=e(0),d=e.n(p),f=e(26),g=e.n(f),b=e(6),x=e(9),m=e(5),j=function(n){var t=[],e=[],i=function(n){n.forEach((function(n){return r(n)}))},r=function(n){n.getPosition().forEach((function(e){return t[e].hasShip=n})),e.push(n)};!function(){for(var n=[],e=0;e<100;e++)n.push({hasShip:!1,isHitted:!1});t=n}();var a="undefined"===typeof n?0:n.length,o=0;a>0&&i(n);var c=function(){return e};return{placeShips:i,placeShip:r,getBoard:function(){return t},getField:function(n){return t[n]},getShips:c,receiveAttack:function(n){var e=t[n].hasShip;t[n].isHitted=!0,e&&(e.hit(n),e.isSunk()&&o++)},checkIfAllDestroyed:function(){if(a===o)return!0},replaceShip:function(n,e){c().find((function(t){return n.getId()===t.getId()})).getPosition().forEach((function(n){return t[n].hasShip=!1})),n.setPosition(e),e.forEach((function(e){return t[e].hasShip=n}))},getShipCount:function(){return a-o}}},v=function(n,t){var e=n,i=0,r=t,a=j(r);return{attack:function(n,t){n.getField(t).isHitted||n.receiveAttack(t)},increaseScore:function(){i++},getScore:function(){return i},getGameboard:function(){return a},getShips:function(){return r},getType:function(){return e}}},O=[{name:"Carrier",length:5,amount:1},{name:"Battleship",length:4,amount:1},{name:"Cruiser",length:3,amount:2},{name:"Destroyer",length:2,amount:2}],y=function(n){var t=function(n){return[n-11,n-10,n-9]},e=function(n){return[n-11,n-1,n+9]},i=function(n){return[n+9,n+10,n+11]},r=function(n){return[n-9,n+1,n+11]},a=[0,1,2,3,4,5,6,7,8,9],o=[0,10,20,30,40,50,60,70,80,90],c=[90,91,92,93,94,95,96,97,98,99],s=[9,19,29,39,49,59,69,79,89,99],u=[];n.forEach((function(n){var h,l=function(n){var t=[];return a.includes(n)&&t.push("top"),o.includes(n)&&t.push("left"),c.includes(n)&&t.push("bot"),s.includes(n)&&t.push("right"),t}(n);(h=u).push.apply(h,Object(x.a)(t(n)).concat(Object(x.a)(e(n)),Object(x.a)(r(n)),Object(x.a)(i(n)))),l.includes("top")&&(u=u.filter((function(e){return!t(n).includes(e)}))),l.includes("bot")&&(u=u.filter((function(t){return!i(n).includes(t)}))),l.includes("left")&&(u=u.filter((function(t){return!e(n).includes(t)}))),l.includes("right")&&(u=u.filter((function(t){return!r(n).includes(t)})))}));var h=[];return u.forEach((function(t){h.includes(t)||n.includes(t)||h.push(t)})),h},S=function(n,t,e){var i=[];if(t.getShips().forEach((function(n){var t;return(t=i).push.apply(t,Object(x.a)(n.getNearbyCoordinates()))})),void 0!==e&&0!==e.getPosition().length){var r=i.filter((function(n,t){return i.indexOf(n)!==t}));i=i.filter((function(n){return!e.getNearbyCoordinates().includes(n)})).concat(r)}return!!i.includes(n)},w=function(n,t){return n.some((function(n){return t.getField(n).hasShip}))},k=function(n,t){if("horizontal"===t){var e=10*parseInt(n[0]/10,10);if(10*parseInt(n[n.length-1]/10,10)>e)return!0}return n[0]<0||n[n.length-1]>99},C=function(n,t,e){return!!n.some((function(n){return S(n,t,e)}))},z=function(n,t,e,i){var r=j();return r.placeShips(t.getShips()),void 0!==i&&i.getPosition().forEach((function(n){return r.getField(n).hasShip=!1})),!(k(n,e)||C(n,t,i)||w(n,r))},A=function(n,t,e,i){var r=n,a=t,o="horizontal",c=e,s=y(t),u=[],h=i;return{hit:function(n){u.push(n)},isSunk:function(){return a.every((function(n){return u.includes(n)}))},getHits:function(){return u},getPosition:function(){return a},setPosition:function(n){a=n,s=y(n)},getName:function(){return r},getNearbyCoordinates:function(){return s},setNearbyCoordinates:function(n){s=n},getLength:function(){return c},getId:function(){return h},rotate:function(n){var t,e=a[0];"horizontal"===o?(t=a.map((function(n,t){return e+10*t})),o="vertical"):(t=a.map((function(n,t){return e+t})),o="horizontal"),z(t,n,o,this)?(n.replaceShip(this,t),s=y(a)):o="horizontal"===o?"vertical":"horizontal"},getAlignment:function(){return o}}},N=function n(t,e){for(var i=Math.floor(100*Math.random()),r=[i],a=1;a<t;a++)r.push(i+a);return z(r,e,"horizontal",void 0)||(r=n(t,e)),r},E=function(){var n=[],t=j();return O.forEach((function(e){for(var i=0;i<e.amount;i++){var r=Math.random(),a=A(e.name,N(e.length,t),e.length,1e3*Math.random());t.placeShip(a),r>.5&&a.rotate(t),n.push(a)}})),n},F=e(1),B=Object(p.createContext)(),D=B.Provider,I="Set players",H="Set message",P="Reset message",M="Restart game",G="Change game phase",L="set the winner of the game",R="set who can play this turn",T=function(n,t){var e=t.type,i=t.payload;switch(e){case I:return Object(m.a)(Object(m.a)({},n),{},{phase:"Play",players:{player:v("Human",Object(x.a)(i)),ai:v("AI",E())}});case H:return Object(m.a)(Object(m.a)({},n),{},{message:i});case P:return Object(m.a)(Object(m.a)({},n),{},{message:""});case M:return{phase:"Selection",players:{player:"",ai:""},turn:"player",message:"",winner:""};case G:return Object(m.a)(Object(m.a)({},n),{},{phase:i});case L:return Object(m.a)(Object(m.a)({},n),{},{winner:i});case R:return Object(m.a)(Object(m.a)({},n),{},{turn:i,message:"-- "+i+"'s turn --"});default:return n}},W=function(n){var t=n.children,e=Object(p.useReducer)(T,{phase:"Selection",players:{},turn:"player",message:"",winner:""}),i=Object(b.a)(e,2),r=i[0],a=i[1];return Object(F.jsx)(D,{value:{state:r,dispatch:a},children:t})},U=!1,J=function(n){var t=n.getShips().find((function(n){return n.getHits().length>0&&!n.isSunk()}));return t||!1},X=function(n,t){var e=[];n.getBoard().forEach((function(n,t){!1===n.isHitted&&e.push(t)}));var i=q(n,e);n.receiveAttack(i),en(n,i,t)},q=function n(t,e){var i=e[Math.floor(Math.random()*(e.length-1))];return K(t,e,i)?n(t,e):i},K=function(n,t,e){var i=[-10,-1,1,10];return e<10&&(i=[-1,1,10]),e>89&&(i=[-10,-1,1]),0===e&&(i=[1,10]),99===e&&(i=[-1,-10]),!!i.every((function(t){return n.getField(e+t).isHitted}))},Q=function(n,t){var e=J(n),i=e.getHits().sort((function(n,t){return n-t})),r=e.getAlignment();"horizontal"===r?V(n,i,r,t):Y(n,i,r,t),nn(n,e,t)},V=function(n,t,e,i){var r=t[0]-1,a=t[t.length-1]+1;Z(r,n,e)?(n.receiveAttack(r),en(n,r,i)):(n.receiveAttack(a),en(n,a,i))},Y=function(n,t,e,i){var r=t[0]-10,a=t[t.length-1]+10;Z(r,n,e)?(n.receiveAttack(r),en(n,r,i)):(n.receiveAttack(a),en(n,a,i))},Z=function(n,t,e){var i=t.getField(n);return!($(n)||i.isHitted||_(n,e))},$=function(n){return n<0||n>99},_=function(n,t){if("horizontal"===t){var e=10*parseInt(n/10,10);if(10*parseInt((n+1)/10,10)>e)return!0}return!1},nn=function(n,t,e){t.isSunk()&&(tn(n,t.getPosition()[0]),e({type:H,payload:"Our Ship is no more Captain!"}))},tn=function(n,t){n.getField(t).hasShip.getNearbyCoordinates().forEach((function(t){return n.receiveAttack(t)}))},en=function(n,t,e){n.getField(t).hasShip?(U=!0,e({type:H,payload:"Enemy hitted your Ship!"})):(U=!1,e({type:H,payload:"Enemy missed! This is our chance Captain!"}))},rn=function(n,t){if(n.checkIfAllDestroyed())return t({type:G,payload:"End"}),t({type:L,payload:"Computer"}),!0},an=function(n,t,e){var i=n.getGameboard();J(i)?Q(i,e):X(i,e),rn(i,e)||on(U?"ai":"player",n,t,e)},on=function(n,t,e,i){"ai"===n?(i({type:R,payload:"ai"}),setTimeout((function(){return an(t,e,i)}),1250)):i({type:R,payload:"player"})},cn=function(n,t,e){n.getField(t).hasShip.isSunk()&&(e({type:H,payload:"Enemy's ship destroyed"}),un(n,t))},sn=function(n,t,e){n.checkIfAllDestroyed()&&(e({type:G,payload:"End"}),e({type:L,payload:"player"}))},un=function(n,t){n.getField(t).hasShip.getNearbyCoordinates().forEach((function(t){return n.receiveAttack(t)}))},hn=function(n,t,e,i){var r=t.getGameboard();r.receiveAttack(e),r.getField(e).hasShip?(cn(r,e,i),sn(r,n,i),on("player",n,t,i)):on("ai",n,t,i)},ln=e(3),pn=e(4),dn=pn.b.div(i||(i=Object(ln.a)(["\n  width: 50px;\n  height: 50px;\n  border: 1px solid;\n  background-color: ",";\n  font-size: 50px;\n  text-align: center;\n\n  .flame {\n    width: 50px;\n    height: 50px;\n    animation: grow 1s;\n  }\n  @keyframes grow {\n    0% {\n      transform: scale(0);\n    }\n    75% {\n      transform: scale(1.25);\n    }\n\n    100% {\n      transform: scale(1);\n    }\n  }\n\n  .missed {\n    animation: shake 0.5s;\n  }\n\n  @keyframes shake {\n    10%,\n    90% {\n      transform: translate3d(-0.5px, 0, 0);\n    }\n\n    20%,\n    80% {\n      transform: translate3d(1px, 0, 0);\n    }\n\n    30%,\n    50%,\n    70% {\n      transform: translate3d(-2px, 0, 0);\n    }\n\n    40%,\n    60% {\n      transform: translate3d(2px, 0, 0);\n    }\n  }\n\n  @media (max-width: 1135px) {\n    width: 25px;\n    height: 25px;\n    font-size: 25px;\n\n    .flame {\n      width: 25px;\n      height: 25px;\n    }\n  }\n"])),(function(n){return n.hasShip?"#f02d3a":n.hasWater?"#62b4cf":"white"})),fn=e.p+"static/media/flame.56be189b.png",gn=function(n){var t=n.field,e=n.coordinates,i=n.belongsTo,r=Object(p.useState)(!1),a=Object(b.a)(r,2),o=a[0],c=a[1],s=Object(p.useContext)(B),u=s.state,h=s.dispatch,l=u.players.player,d=u.players.ai,f=function(){return Object(F.jsx)("img",{className:"flame",alt:"X",src:fn})},g=function(){return Object(F.jsx)("div",{className:"missed",children:"\u2022"})};return"Human"===i?Object(F.jsx)(dn,{hasShip:t.hasShip,hasWater:!0,children:t.isHitted&&Object(F.jsx)("div",{children:t.hasShip?f():g()})}):Object(F.jsx)(dn,{hasShip:t.isHitted&&t.hasShip,hasWater:!t.hasShip&&t.isHitted,onClick:"player"===u.turn?function(){!1===o&&(h({type:P}),hn(l,d,e,h),c(!0))}:void 0,className:"cell",children:t.isHitted&&Object(F.jsx)("div",{children:t.hasShip?f():g()})})},bn=pn.b.div(r||(r=Object(ln.a)(["\n  width: 100%;\n  margin-top: 5px;\n  font-size: 24px;\n  color: #f4a261;\n  text-align: center;\n  font-weight: bold;\n\n  @media (max-width: 650px){\n    font-size: 16px;\n  }\n"]))),xn=function(n){var t=n.player,e=t.getGameboard();return Object(F.jsxs)("div",{className:"gameBoard",children:[e.getBoard().map((function(n,e){return Object(F.jsx)(gn,{field:n,coordinates:e,belongsTo:t.getType()},e)})),Object(F.jsxs)(bn,{children:[e.getShipCount()," ships left"]})]})},mn=pn.b.div(a||(a=Object(ln.a)(["\n  position: relative;\n  padding: 50px;\n  background-color: #006494;\n\n  .gameboardsContainer {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-around;\n  }\n\n  .gameBoard {\n    width: 500px;\n    height: 500px;\n    border: 1px solid;\n    display: flex;\n    flex-wrap: wrap;\n    box-sizing: content-box;\n    border: 3px solid black;\n  }\n\n  .button {\n    font-size: 20px;\n    background-color: #e67a00;\n    font-weight: bold;\n    height: 50px;\n    border: 3px solid black;\n\n    &:hover {\n      background-color: #ff8800;\n    }\n  }\n\n  @media (max-width: 1135px) {\n    .gameBoard {\n      width: 250px;\n      height: 250px;\n    }\n  }\n\n  @media (max-width: 650px) {\n\n    .gameboardsContainer {\n      flex-direction: column;\n      align-items: center;\n    }\n\n    .gameBoard {\n      margin-bottom: 50px;\n    }\n  }\n"]))),jn=pn.b.div(o||(o=Object(ln.a)(["\n  width: 100%;\n  height: 100vh;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  font-size: 50px;\n  color: white;\n  background-color: #006494;\n\n  button {\n    margin-top: 20px;\n    width: 200px;\n    height: 50px;\n  }\n\n  @media (max-width: 650px){\n    font-size: 26px;\n  }\n"]))),vn=function(n){var t=n.winner,e=n.dispatch;return Object(F.jsxs)(jn,{children:[Object(F.jsxs)("h2",{children:[t," wins"]}),Object(F.jsx)("button",{className:"button",onClick:function(){e({type:M})},children:"Play again!"})]})},On=pn.b.div(c||(c=Object(ln.a)(['\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .shipList {\n    margin-left: 50px;\n    max-width: 200px;\n  }\n\n  .ship {\n    display: flex;\n    flex-direction: row;\n    margin: 20px;\n  }\n\n  .moveable {\n    cursor: move;\n  }\n\n  .isOver {\n    position: "absolute";\n    top: 0;\n    left: 0;\n    height: "100%";\n    width: "100%";\n    z-index: 1;\n    opacity: 0.5;\n    background-color: "yellow";\n  }\n\n  .mainUI {\n    display: flex;\n    justify-content: center;\n  }\n\n  .buttonContainer {\n    margin: 0 auto;\n    margin-top: 50px;\n    display: flex;\n  }\n\n  .randomButton {\n    width: 150px;\n  }\n\n  .playButton {\n    margin-left: 50px;\n    width: 400px;\n    height: 50px;\n    font-weight: bold;\n\n    &.deactivated {\n      background-color: grey;\n    }\n\n    &.active {\n      &:hover {\n        background-color: #ff8800;\n      }\n    }\n\n    &:hover {\n      background-color: none;\n    }\n  }\n\n  @media (max-width: 660px){\n    .mainUI{\n      flex-direction: column;\n    }\n\n    .playButton{\n      width: 200px;\n      margin-left: 0px;\n      margin-top: 10px; \n    }\n\n    .randomButton{\n      width: 200px;\n    }\n\n    .buttonContainer {\n      flex-direction: column;\n    }\n  }\n']))),yn=e(48),Sn=e(49),wn=function(n){var t=n.field,e=n.coordinates,i=n.board,r=n.render,a=function(n,t){var i=[];if("horizontal"===n)for(var r=0;r<t;r++)i.push(e+r);else for(var a=0;a<t;a++)i.push(e+10*a);return i},o=Object(yn.a)({accept:["ship","cell"],canDrop:function(n){var t=a(n.ship.getAlignment(),n.ship.getLength());return z(t,i,n.ship.getAlignment(),n.ship)},drop:function(n,t){var e=a(n.ship.getAlignment(),n.ship.getLength());void 0!==n.shipIsOnField?i.replaceShip(n.ship,e):(n.ship.setPosition(e),i.placeShip(n.ship)),r(),n.changeNumber&&n.changeNumber()},collect:function(n){return{isOver:!!n.isOver(),canDrop:!!n.canDrop()}}}),c=Object(b.a)(o,2),s=c[0],u=s.isOver,h=s.canDrop,l=c[1],p=Object(Sn.a)({type:"cell",item:{ship:i.getField(e).hasShip,shipIsOnField:!0},collect:function(n){return{isDragging:!!n.isDragging()}}}),d=Object(b.a)(p,2),f=d[0].isDragging,g=d[1],x=l;i.getField(e).hasShip&&(x=g);return Object(F.jsx)(dn,{ref:x,hasShip:t.hasShip,hasWater:!t.hasShip,isOver:u,style:{opacity:f?.5:1,backgroundColor:h&&u?"green":""},onClick:t.hasShip?function(){var n=i.getField(e).hasShip;n.rotate(i),i.replaceShip(n,n.getPosition()),r()}:void 0,children:S(e,i)&&Object(F.jsx)("div",{children:"\u2022"})})},kn=function(){return Object(F.jsx)(dn,{hasShip:!0})},Cn=function(n){var t=n.shipArray,e=n.shipData,i=n.Gameboard,r=Object(p.useState)(e.amount),a=Object(b.a)(r,2),o=a[0],c=a[1],s=Object(Sn.a)({type:"ship",item:{ship:t[o-1],changeNumber:function(){c(o-1)}},collect:function(n){return{isDragging:!!n.isDragging()}}}),u=Object(b.a)(s,2),h=u[0].isDragging,l=u[1];(o<1||6===i.getShips().length)&&(l=void 0);return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:o}),Object(F.jsx)("div",{ref:l,style:{opacity:h?.5:1,fontSize:25,fontWeight:"bold"},className:"ship ".concat(o>0?"moveable":""),children:function(){for(var n=[],e=0;e<t[0].getLength();e++)n.push(Object(F.jsx)(kn,{},e));return n}()})]})},zn=e(47),An=e(31),Nn=function(n){var t=n.children;return Object(F.jsx)(zn.a,{backend:An.a,children:t})},En=pn.b.div(s||(s=Object(ln.a)(["\n  display: flex;\n  color: #ff8800;\n  font-weight: bold;\n  font-size: 20px;\n  margin-top: 50px;\n  margin-left: 20px;\n  img {\n    width: 50px;\n    height: 50px;\n    margin-right: 10px;\n  }\n\n   @media (max-width:1140px){\n     font-size: 12px;\n\n     img {\n       width: 25px;\n       height: 25px;\n     }\n   }\n"]))),Fn=e.p+"static/media/light-bulb.27cc7f2e.png",Bn=function(){return Object(F.jsxs)(En,{children:[Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:Fn,alt:""})}),Object(F.jsxs)("div",{children:[Object(F.jsx)("p",{children:" Drag&Drop the ships on the right position"}),Object(F.jsx)("p",{children:"Click on the ship when placed to rotate"})]})]})},Dn=function(){var n=Object(p.useContext)(B).dispatch,t=Object(p.useState)(j()),e=Object(b.a)(t,2),i=e[0],r=e[1],a=Object(p.useState)(0),o=Object(b.a)(a,2),c=o[0],s=o[1],u=Object(p.useState)(!1),h=Object(b.a)(u,2),l=h[0],d=h[1],f=function(n){s(c+1)};return Object(p.useEffect)((function(){6===i.getShips().length&&d(!0)}),[i.getShips().length]),Object(F.jsx)(Nn,{children:Object(F.jsxs)(On,{children:[Object(F.jsxs)("div",{className:"mainUI",children:[Object(F.jsx)("div",{className:"gameBoard",children:i.getBoard().map((function(n,t){return Object(F.jsx)(wn,{field:n,coordinates:t,board:i,render:f},t)}))}),Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"shipList",children:O.map((function(n,t){for(var e=[],r=0;r<n.amount;r++)e.push(A(n.name,[],n.length,10*t+r));return Object(F.jsx)(Cn,{shipArray:e,shipData:n,Gameboard:i},t)}))}),Object(F.jsx)(Bn,{})]})]}),Object(F.jsxs)("div",{className:"buttonContainer",children:[Object(F.jsx)("button",{className:" button randomButton",onClick:function(){r(j(E())),s(c+1)},children:"Random"}),Object(F.jsx)("button",{onClick:l?function(){n({type:I,payload:i.getShips()})}:void 0,className:"button playButton ".concat(l?"active":"deactivated"),children:"Play"})]})]})})},In=pn.b.div(u||(u=Object(ln.a)(["\n  margin: 0 auto;\n  width: fit-content;\n  min-height: 40px;\n  text-align: center;\n  color: #f4a261;\n  font-size: 32px;\n  font-weight: bold;\n  text-transform: capitalize;\n  border-top: 4px solid black;\n  border-bottom: 4px solid black;\n  margin-top: 50px;\n\n  @media (max-width: 650px){\n    font-size: 24px;\n    margin-top: 20px;\n  }\n"]))),Hn=function(){var n=Object(p.useContext)(B),t=n.state,e=n.dispatch;return Object(F.jsx)("div",{children:Object(F.jsxs)(mn,{children:["Selection"===t.phase&&Object(F.jsx)(Dn,{}),"Play"===t.phase&&Object(F.jsxs)(d.a.Fragment,{children:[Object(F.jsxs)("div",{className:"gameboardsContainer",children:[Object(F.jsx)(xn,{player:t.players.player}),Object(F.jsx)(xn,{player:t.players.ai})]}),Object(F.jsx)(In,{color:t.messageColor,children:t.message})]}),"End"===t.phase&&Object(F.jsx)(vn,{winner:t.winner,dispatch:e})]})})},Pn=pn.b.div(h||(h=Object(ln.a)(["\n  background-color: #006494;\n  h1 {\n    font-size: 124px;\n    text-align: center;\n    color: #f4a261;\n    text-transform: uppercase;\n  }\n\n  @media (max-width: 1100px){\n    h1 {\n      font-size: 62px;\n    }\n  }\n\n  @media (max-width: 600px){\n    h1 {\n      font-size: 36px;\n    }\n  }\n"]))),Mn=function(){return Object(F.jsx)(Pn,{children:Object(F.jsx)("h1",{children:"Battleships"})})},Gn=pn.b.div(l||(l=Object(ln.a)(["\n  background-color: #006494;\n  height: 100vh;\n"])));var Ln,Rn=function(){return Object(F.jsx)(Gn,{children:Object(F.jsxs)(W,{children:[Object(F.jsx)(Mn,{}),Object(F.jsx)(Hn,{})]})})},Tn=Object(pn.a)(Ln||(Ln=Object(ln.a)(['\n@import url(\'https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Roboto&display=swap\');;\n  * {\n    padding: 0px;\n    margin: 0px;\n    box-sizing: border-box;\n    font-family: "Roboto", sans-serif ;\n  }\n  \n\n  h1,h2 {\n    font-family: "Abril Fatface"\n  }\n\n'])));g.a.render(Object(F.jsxs)(d.a.StrictMode,{children:[Object(F.jsx)(Tn,{}),Object(F.jsx)(Rn,{})]}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9e7a445f.chunk.js.map